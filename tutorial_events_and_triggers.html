<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="author" content="SXS Collaboration">
    <meta name="generator" content="Doxygen 1.9.1"/>
  <title>SpECTRE: Events and triggers</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="./MathJax.js"></script>
  <link href="octicons.css" rel="stylesheet">
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="https://unpkg.com/tippy.js@6"></script>
  <script type="text/javascript" src="spectre.js"></script>
  <script type="text/javascript" src="doxygen-navtree-hacks.js"></script>
  </head>
  <body>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0">
      <tbody>
        <tr style="height: 56px;">
          <td id="projectalign" style="padding-left: 0.5em;">
            <div id="projectname">
              <a href="index.html">SpECTRE</a>
              &#160;<span id="projectnumber">v2022.08.01</span>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('tutorial_events_and_triggers.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Events and triggers </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_docs_Tutorials_EventsAndTriggers"></a> The "events and triggers" infrastructure (and the related "events and
dense triggers") provide some control of SpECTRE executable execution from the input file contents by running user-specified code on the elements. It does not generally have major effects on the flow of the <a class="el" href="dev_guide_parallelization_foundations.html#dev_guide_parallelization_core_algorithm">algorithm</a>, but is primarily used for observations, such as writing volume data to H5 files, and minor simulation adjustments.</p>
<h2><a class="anchor" id="autotoc_md48"></a>
Events</h2>
<p>An <a class="el" href="classEvent.html">event</a> is an input-file-creatable object that performs some task that (with the exception of the <a class="el" href="classEvents_1_1Completion.html">Completion</a> event) does not directly affect the execution of the algorithm on the element. The effects of events are limited to sending messages. The most commonly used events (such as the <a class="el" href="classEvents_1_1ObserveNorms.html">ObserveNorms</a> event) send data to be written to disk, but have no long-term effects on the simulation state. Others (such as <a class="el" href="classEvents_1_1ChangeSlabSize.html">ChangeSlabSize</a>) can have indirect effects when <a class="el" href="dev_guide_parallelization_foundations.html#dev_guide_parallelization_actions">actions</a> react to the messages they send.</p>
<h2><a class="anchor" id="autotoc_md49"></a>
Triggers</h2>
<p>A <a class="el" href="classTrigger.html">trigger</a> is an input-file-creatable object that controls when events are run. They are checked periodically, once per <a class="el" href="classSlab.html" title="A chunk of time. Every element must reach slab boundaries exactly, no matter how it actually takes ti...">Slab</a> in an evolution executable, and once per iteration in an elliptic solve. At each check a trigger may fire, causing its associated events to run or not. Triggers must give a consistent result over the entire domain at each check, so their result must always be independent of element-specific state, such as the local values of the system variables.</p>
<h2><a class="anchor" id="autotoc_md50"></a>
Dense triggers</h2>
<p>A <a class="el" href="classDenseTrigger.html">dense trigger</a> is similar to a trigger, but uses time-stepper dense output (i.e., interpolation or extrapolation) to provide more precise control of the time that it fires. As a time-related feature, dense triggers are only applicable to evolution executables. Dense triggers fire at a precise set of times, independent of the time-step or slab state, by interpolating the evolved variables to the requested time before running the associated events. As with normal triggers, dense triggers are required to fire consistently over the entire domain.</p>
<h2><a class="anchor" id="autotoc_md51"></a>
Input file syntax</h2>
<p>The <code>EventsAndTriggers</code> (and <code>EventsAndDenseTriggers</code>) sections of the <a class="el" href="dev_guide_option_parsing.html">input file</a> indicate structure using a collection of <code>?</code>, <code>:</code>, and <code>-</code> characters. These are standard, if perhaps somewhat obscure, YAML syntax. They are defining a map from triggers to lists of events. The <code>?:</code> syntax defines an expanded key-value pair, which allows the key to be a complicated type, unlike the common <code>Key: Value</code> syntax. The <code>-</code> is the expanded form of a list, which allows entries to have complicated types. Frequently only one event is associated with a trigger, so there will only be a single <code>-</code> after the <code>:</code>, but additional events introduced by more <code>-</code> characters can appear afterwards:</p>
<div class="fragment"><div class="line">EventsAndTriggers:</div>
<div class="line">  ? Slabs:</div>
<div class="line">      EvenlySpaced:</div>
<div class="line">        Interval: 10</div>
<div class="line">        Offset: 0</div>
<div class="line">  : - ObserveFields:</div>
<div class="line">        SubfileName: Fields</div>
<div class="line">        VariablesToObserve: [Psi]</div>
<div class="line">        InterpolateToMesh: None</div>
<div class="line">        CoordinatesFloatingPointType: Double</div>
<div class="line">        FloatingPointTypes: [Double]</div>
<div class="line">    - ObserveNorms:</div>
<div class="line">        SubfileName: Errors</div>
<div class="line">        TensorsToObserve:</div>
<div class="line">          - Name: Error(Psi)</div>
<div class="line">            NormType: L2Norm</div>
<div class="line">            Components: Sum</div>
<div class="line">          - Name: Error(Phi)</div>
<div class="line">            NormType: L2Norm</div>
<div class="line">            Components: Sum</div>
<div class="line">          - Name: Error(Pi)</div>
<div class="line">            NormType: L2Norm</div>
<div class="line">            Components: Sum</div>
</div><!-- fragment --><p> In this example, we are using the <a class="el" href="classTriggers_1_1Slabs.html">Slabs</a> trigger to run two events every 10 slabs: ObserveFields and <a class="el" href="classEvents_1_1ObserveNorms.html">ObserveNorms</a>.</p>
<p>If an event and trigger both took no options, the syntax</p>
<div class="fragment"><div class="line">  ? Always</div>
<div class="line">  : - Completion</div>
</div><!-- fragment --><p> could be written in the more familiar form</p>
<div class="fragment"><div class="line">  Always: [Completion]</div>
</div><!-- fragment --><p> but we recommend always using the expanded form for consistency. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="tutorials.html">User Tutorials</a></li>
    <li class="footer">
    &copy; Copyright 2017 - 2022
    <a href="https://black-holes.org">SXS Collaboration</a>,
    <a href="LICENSE.txt" target="_blank">
    <span class="hidden-xs">Distributed under the</span>
    MIT License</a>
  </ul>
</div>
</body>
</html>
